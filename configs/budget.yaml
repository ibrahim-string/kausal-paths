id: budget
default_language: en
supported_languages: [fi]
site_url: https://budget.paths.test.kausal.dev
dataset_repo:
  url: https://github.com/kausaltech/dvctest.git
  commit: 11edf77441369173212c743019ee7c04a1ea2ca1
  dvc_remote: kausal-s3
  default_path: budget
name: Climate budgeting sandbox
owner: Kausal Ltd
theme_identifier: default
target_year: 2030
model_end_year: 2040
minimum_historical_year: 2010
maximum_historical_year: 2023
emission_unit: kt/a
emission_forecast_from: 2023
#emission_dimensions: [emission_scope]
emission_dataset: tampere/scenarios/emissions/bau
#emission_sector_dimension: emission_sectors
features:
  baseline_visible_in_graphs: true
  show_accumulated_effects: true
  show_significant_digits: 3
terms:
  enabled_label: Is implemented
  action_group_label: Group
params:
- id: municipality_name
  value: sunnydale
- id: action_impact_from_baseline
  value: true

action_efficiency_pairs:
- graph_type: return_of_investment
  cost_node: investments
  impact_node: returns
  invert_cost: false
  invert_impact: false
  indicator_unit: '%'
  cost_unit: MEUR
  impact_unit: MEUR
  label: Return of investment
- graph_type: cost_benefit
  cost_node: test_investments
  impact_node: discounted_costs
  invert_cost: true
  invert_impact: true
  indicator_unit: MEUR
  cost_unit: MEUR
  impact_unit: MEUR
  stakeholder_dimension: stakeholder
  outcome_dimension: outcome_of_interest
  label: Cost-benefit analysis

dimensions:

- id: vehicle_type
  label: Vehicle type
  label_fi: Ajoneuvotyyppi
  categories:
  - id: walking
    label: Walking
    label_fi: Kävely
  - id: cycling
    label: Cycling
    label_fi: Pyöräily
  - id: bus
    label: Bus
    label_fi: Bussi
  - id: tram
    label: Tram
    label_fi: Ratikka
  - id: car
    label: Car
    label_fi: Auto

- id: stakeholder
  label: Stakeholder
  label_fi: Sidosryhmä
  categories:
  - id: city
    label: City
    label_fi: Kaupunki
  - id: citizen
    label: Citizen
    label_fi: Kaupunkilaiinen
  - id: society
    label: Society
    label_fi: Yhteiskunta

- id: outcome_of_interest
  label: Outcome of interest
  label_fi: Kiinnostava tulos
  categories:
  - id: infrastructure_investment
    label: Infrastructure investment
    label_fi: Infrastruktuuri-investointi
  - id: infrastructure_maintenance
    label: Infrastructure maintenance
    label_fi: Infrastruktuurin ylläpito
  - id: transit_operations
    label: Transit operations
    label_fi: Liikennöinti
  - id: ticket_sales
    label: Ticket sales
    label_fi: Lipputulot
  - id: vehicle_usage
    label: Vehicle usage
    label_fi: Ajoneuvon käyttö
  - id: travel_time
    label: Travel time
    label_fi: Matka-aika
  - id: health
    label: Health
    label_fi: Terveys
  - id: healthcare_cost
    label: Healthcare cost
    label_fi: Terveydenhuollon kustannus
  - id: accidents
    label: Accidents
    label_fi: Onnettomuudet
  - id: climate_change
    label: Climate change
    label_fi: Ilmastonmuutos
  - id: air_pollution
    label: Air pollution
    label_fi: Ilmansaaste
  - id: noise
    label: Noise
    label_fi: Melu

- id: action
  label: Action
  label_fi: Toimenpide
  categories:
  - id: baseline
    label: Baseline
    label_fi: Perusura
  - id: activity
    label: Activity
    label_fi: Toiminto

emission_sectors:
- id: net_emissions
  name: Net emissions
  is_outcome: true

- id: industry_emissions
  name: Industry emissions
  part_of: net_emissions
  column: Industry without city machinery
  color: '#E8B455'

nodes:

- id: population2
  type: finland.population.Population
  name: Population
  input_datasets:
  - id: statfi/StatFin/vrm/vaerak/statfin_vaerak_pxt_11re
    filters:
    - column: Alue
      value: Espoo
  - id: statfi/StatFin/vrm/vaenn/statfin_vaenn_pxt_139f
    filters:
    - column: Alue
      value: Espoo

- id: population
  name: Population
  name_fi: Väestö
  type: simple.AdditiveNode
  quantity: population
  unit: cap
  historical_values: [[2010, 250000]]

################ GPC framework

### THIRD LEVEL

- id: residential_fuel
  name: I.1.1 Residential, Fuel Combustion
  type: simple.AdditiveNode
  quantity: emissions
  unit: kt/a
  input_nodes: []
  historical_values: [[2010, 1]]
- id: residential_electricity
  name: I.1.2 Residential, Grid Energy
  type: simple.AdditiveNode
  quantity: emissions
  unit: kt/a
  input_nodes: []
  historical_values: [[2010, 1]]
- id: commercial_fuel
  name: I.2.1 Commercial & Institutional, Fuel Combustion
  type: simple.AdditiveNode
  quantity: emissions
  unit: kt/a
  input_nodes: []
  historical_values: [[2010, 1]]
- id: commercial_electricity
  name: I.2.2 Commercial & Institutional, Grid Energy
  type: simple.AdditiveNode
  quantity: emissions
  unit: kt/a
  input_nodes: []
  historical_values: [[2010, 1]]
- id: manufacturing_fuel
  name: I.3.1 Manufacturing, Fuel Combustion
  type: simple.AdditiveNode
  quantity: emissions
  unit: kt/a
  input_nodes: []
  historical_values: [[2010, 1]]
- id: manufacturing_electricity
  name: I.3.2 Manufacturing, Grid Energy
  type: simple.AdditiveNode
  quantity: emissions
  unit: kt/a
  input_nodes: []
  historical_values: [[2010, 1]]
- id: energy_fuel
  name: I.4.1 Energy, Fuel Combustion
  type: simple.AdditiveNode
  quantity: emissions
  unit: kt/a
  input_nodes: []
  historical_values: [[2010, 1]]
- id: energy_electricity
  name: I.4.2 Energy, Grid Energy
  type: simple.AdditiveNode
  quantity: emissions
  unit: kt/a
  input_nodes: []
  historical_values: [[2010, 1]]
- id: agriculture_fuel
  name: I.5.1 Ag, Forestry & Fishing, Fuel Combustion
  type: simple.AdditiveNode
  quantity: emissions
  unit: kt/a
  input_nodes: []
  historical_values: [[2010, 1]]
- id: agriculture_electricity
  name: I.5.2 Ag, Forestry & Fishing, Grid Energy
  type: simple.AdditiveNode
  quantity: emissions
  unit: kt/a
  input_nodes: []
  historical_values: [[2010, 1]]
- id: nonspecified_fuel
  name: I.6.1 Non-Specified, Fuel Combustion
  type: simple.AdditiveNode
  quantity: emissions
  unit: kt/a
  input_nodes: []
  historical_values: [[2010, 1]]
- id: nonspecified_electricity
  name: I.6.2 Non-Specified, Grid Energy
  type: simple.AdditiveNode
  quantity: emissions
  unit: kt/a
  input_nodes: []
  historical_values: [[2010, 1]]
- id: fugitive_coal
  name: I.7.1 Fugitive Emissions, Coal
  type: simple.AdditiveNode
  quantity: emissions
  unit: kt/a
  input_nodes: []
  historical_values: [[2010, 1]]
- id: fugitive_oil
  name: I.8.1 Fugitive Emissions, Oil & Natural Gas
  type: simple.AdditiveNode
  quantity: emissions
  unit: kt/a
  input_nodes: []
  historical_values: [[2010, 1]]
- id: onroad_fuel
  name: II.1.1 On-Road Transport, Fuel Combustion
  type: simple.AdditiveNode
  quantity: emissions
  unit: kt/a
  input_nodes: []
  historical_values: [[2010, 1]]
- id: onroad_electricity
  name: II.1.2 On-Road Transport, Grid Energy
  type: simple.AdditiveNode
  quantity: emissions
  unit: kt/a
  input_nodes: []
  historical_values: [[2010, 1]]
- id: railways_fuel
  name: II.2.1 Railways, Fuel Combustion
  type: simple.AdditiveNode
  quantity: emissions
  unit: kt/a
  input_nodes: []
  historical_values: [[2010, 1]]
- id: railways_electricity
  name: II.2.2 Railways, Grid Energy
  type: simple.AdditiveNode
  quantity: emissions
  unit: kt/a
  input_nodes: []
  historical_values: [[2010, 1]]
- id: waterborne_fuel
  name: II.3.1 Waterborne, Fuel Combustion
  type: simple.AdditiveNode
  quantity: emissions
  unit: kt/a
  input_nodes: []
  historical_values: [[2010, 1]]
- id: waterborne_electricity
  name: II.3.2 Waterborne, Grid Energy
  type: simple.AdditiveNode
  quantity: emissions
  unit: kt/a
  input_nodes: []
  historical_values: [[2010, 1]]
- id: aviation_fuel
  name: II.4.1 Aviation, Fuel Combustion
  type: simple.AdditiveNode
  quantity: emissions
  unit: kt/a
  input_nodes: []
  historical_values: [[2010, 1]]
- id: aviation_electricity
  name: II.4.2 Aviation, Grid Energy
  type: simple.AdditiveNode
  quantity: emissions
  unit: kt/a
  input_nodes: []
  historical_values: [[2010, 1]]
- id: offroad_fuel
  name: II.5.1 Off-Road Transport, Fuel Combustion
  type: simple.AdditiveNode
  quantity: emissions
  unit: kt/a
  input_nodes: []
  historical_values: [[2010, 1]]
- id: offroad_electricity
  name: II.5.2 Off-Road Transport, Grid Energy
  type: simple.AdditiveNode
  quantity: emissions
  unit: kt/a
  input_nodes: []
  historical_values: [[2010, 1]]
- id: solidwaste_within
  name: III.1.1 Solid Waste, Disposed Within City
  type: simple.AdditiveNode
  quantity: emissions
  unit: kt/a
  input_nodes: []
  historical_values: [[2010, 1]]
- id: solidwaste_outside
  name: III.1.2 Solid Waste, Disposed Outside City
  type: simple.AdditiveNode
  quantity: emissions
  unit: kt/a
  input_nodes: []
  historical_values: [[2010, 1]]
- id: biowaste_within
  name: III.2.1 Biological Waste, Treated Within City
  type: simple.AdditiveNode
  quantity: emissions
  unit: kt/a
  input_nodes: []
  historical_values: [[2010, 1]]
- id: biowaste_outside
  name: III.2.2 Biological Waste, Treated Outside City
  type: simple.AdditiveNode
  quantity: emissions
  unit: kt/a
  input_nodes: []
  historical_values: [[2010, 1]]
- id: incineration_within
  name: III.3.1 Incineration, Treated Within City
  type: simple.AdditiveNode
  quantity: emissions
  unit: kt/a
  input_nodes: []
  historical_values: [[2010, 1]]
- id: incineration_outside
  name: III.3.2 Incineration, Treated Outside City
  type: simple.AdditiveNode
  quantity: emissions
  unit: kt/a
  input_nodes: []
  historical_values: [[2010, 1]]
- id: wastewater_within
  name: III.4.1 Wastewater, Treated Within City
  type: simple.AdditiveNode
  quantity: emissions
  unit: kt/a
  input_nodes: []
  historical_values: [[2010, 1]]
- id: wastewater_outside
  name: III.4.2 Wastewater, Treated Outside City
  type: simple.AdditiveNode
  quantity: emissions
  unit: kt/a
  input_nodes: []
  historical_values: [[2010, 1]]

#### Second level

- id: residential
  name: I.1 Residential
  type: simple.AdditiveNode
  quantity: emissions
  unit: kt/a
  input_nodes: [residential_fuel, residential_electricity]

- id: commercial
  name: I.2 Commercial & Institutional
  type: simple.AdditiveNode
  quantity: emissions
  unit: kt/a
  input_nodes: [commercial_fuel, commercial_electricity]

- id: manufacturing
  name: I.3 Manufacturing
  type: simple.AdditiveNode
  quantity: emissions
  unit: kt/a
  input_nodes: [manufacturing_fuel, manufacturing_electricity]

- id: energy
  name: I.4 Energy
  type: simple.AdditiveNode
  quantity: emissions
  unit: kt/a
  input_nodes: [energy_fuel, energy_electricity]

- id: agriculture
  name: I.5 Ag, Forestry & Fishing
  type: simple.AdditiveNode
  quantity: emissions
  unit: kt/a
  input_nodes: [agriculture_fuel, agriculture_electricity]

- id: nonspecified
  name: I.6 Non-Specified
  type: simple.AdditiveNode
  quantity: emissions
  unit: kt/a
  input_nodes: [nonspecified_fuel, nonspecified_electricity]

- id: onroad
  name: II.1 On-Road Transport
  type: simple.AdditiveNode
  quantity: emissions
  unit: kt/a
  input_nodes: [onroad_fuel, onroad_electricity]

- id: railways
  name: II.2 Railways
  type: simple.AdditiveNode
  quantity: emissions
  unit: kt/a
  input_nodes: [railways_fuel, railways_electricity]

- id: waterborne
  name: II.3 Waterborne
  type: simple.AdditiveNode
  quantity: emissions
  unit: kt/a
  input_nodes: [waterborne_fuel, waterborne_electricity]

- id: aviation
  name: II.4 Aviation
  type: simple.AdditiveNode
  quantity: emissions
  unit: kt/a
  input_nodes: [aviation_fuel, aviation_electricity]

- id: offroad
  name: II.5 Off-Road Transport
  type: simple.AdditiveNode
  quantity: emissions
  unit: kt/a
  input_nodes: [offroad_fuel, offroad_electricity]

- id: solidwaste
  name: III.1 Solid Waste
  type: simple.AdditiveNode
  quantity: emissions
  unit: kt/a
  input_nodes: [solidwaste_within, solidwaste_outside]

- id: biowaste
  name: III.2 Biological Waste
  type: simple.AdditiveNode
  quantity: emissions
  unit: kt/a
  input_nodes: [biowaste_within, biowaste_outside]

- id: incineration
  name: III.3 Incineration
  type: simple.AdditiveNode
  quantity: emissions
  unit: kt/a
  input_nodes: [incineration_within, incineration_outside]

- id: wastewater
  name: III.4 Wastewater
  type: simple.AdditiveNode
  quantity: emissions
  unit: kt/a
  input_nodes: [wastewater_within, wastewater_outside]

# FIRST LEVEL

- id: stationary
  name: I Stationary
  type: simple.AdditiveNode
  quantity: emissions
  unit: kt/a
  input_nodes: [residential, commercial, manufacturing, energy, agriculture, nonspecified, fugitive_coal, fugitive_oil]
  output_nodes: [net_emissions]

- id: transport
  name: II Transport
  type: simple.AdditiveNode
  quantity: emissions
  unit: kt/a
  input_nodes: [onroad, railways, waterborne, aviation, offroad]
  output_nodes: [net_emissions]

- id: waste
  name: III Waste
  type: simple.AdditiveNode
  quantity: emissions
  unit: kt/a
  input_nodes: [solidwaste, biowaste, incineration, wastewater]
  output_nodes: [net_emissions]

- id: investments
  name: Investments
  type: values.AssociationNode
  quantity: currency
  unit: MEUR/a
  historical_values: [[2010, 100]]

- id: returns
  name: Returns
  type: simple.FixedMultiplierNode
  quantity: currency
  unit: MEUR/a
  input_nodes: [net_emissions]
  params:
  - id: multiplier
    value: -100
    unit: EUR/t

- id: walking
  name: Walking
  name_fi: Kävely
  type: simple.AdditiveNode
  quantity: mileage
  unit: Mpkm/a
  historical_values: [[2005, 0]]
#  input_nodes:
#  - id: population
#  - id: mode_activity

- id: cycling
  name: Cycling
  name_fi: Pyöräily
  type: simple.AdditiveNode
  quantity: mileage
  unit: Mpkm/a
  historical_values: [[2005, 0]]
#  input_nodes:
#  - id: population
#  - id: mode_activity

- id: bus_transit
  name: Bus transit
  name_fi: Bussiliikenne
  type: simple.AdditiveNode
  quantity: mileage
  unit: Mpkm/a
  historical_values: [[2005, 0]]
#  input_nodes:
#  - id: population
#  - id: mode_activity

- id: tram_transit
  name: Tram transit
  name_fi: Ratikkaliikenne
  type: simple.AdditiveNode
  quantity: mileage
  unit: Mpkm/a
  historical_values: [[2005, 0]]

- id: mode_activity
  name: Mode activity
  name_fi: Suorite liikkumismuodoittain
  type: simple.AdditiveNode
  quantity: mileage
  unit: pkm/cap/d
  historical_values: [[2010, 1.24], [2022, 1.24]]
  input_dataset_processors: [LinearInterpolation]

- id: person_mileage_car
  name: Person mileage in cars
  name_fi: Henkilökilometrit autolla
  type: simple.AdditiveNode
  quantity: mileage
  unit: Mpkm/a
  historical_values: [[2005, 0], [2023, 0]]
  input_dataset_processors: [LinearInterpolation]

#- id: vehicle_mileage_car
#  name: Car vehicle mileage
#  name_fi: Liikennesuorite henkilöautolla
#  type: simple.MultiplicativeNode
#  quantity: mileage
#  unit: Mvkm/a
#  input_nodes:
#  - id: person_mileage_car
#  - id: vehicle_load
#    metric: car

- id: vehicle_load
  name: Persons in vehicle
  name_fi: Keskikuormitus ajoneuvossa
  type: simple.AdditiveNode
  quantity: mileage
  unit: vkm/pkm
  historical_values: [[2010, 1.7]]

- id: unit_prices
  name: Unit prices
  name_fi: Yksikkökustannukset
  type: simple.AdditiveNode
  quantity: currency
  unit: EUR/pkm
  input_datasets:
  - id: budget/unit_prices_of_transportation
  input_dataset_processors: [LinearInterpolation]
  output_dimensions: [vehicle_type, outcome_of_interest]

- id: outcome_stakeholder_matrix
  name: Outcome stakeholder matrix
  type: simple.AdditiveNode
  quantity: fraction
  unit: dimensionless
  input_datasets:
  - id: budget/outcome_stakeholder_matrix
  input_dataset_processors: [LinearInterpolation]
  input_dimensions: [stakeholder, outcome_of_interest]
  output_dimensions: [stakeholder, outcome_of_interest]

- id: passenger_km
  name: Total passenger kilometers
  name_fi: Matkustajakilometrit yhteensä
  type: simple.RelativeNode
  quantity: mileage
  unit: Mpkm/a
  input_nodes:
  - id: walking
    to_dimensions:
    - id: vehicle_type
      categories: [walking]
  - id: cycling
    to_dimensions:
    - id: vehicle_type
      categories: [cycling]
  - id: bus_transit
    to_dimensions:
    - id: vehicle_type
      categories: [bus]
  - id: tram_transit
    to_dimensions:
    - id: vehicle_type
      categories: [tram]
  - id: person_mileage_car
    to_dimensions:
    - id: vehicle_type
      categories: [car]
  input_dimensions: [vehicle_type]
  output_dimensions: [vehicle_type]

- id: costs
  name: Costs of transportation
  name_fi: Liikenteen kustannukset
  type: simple.MultiplicativeNode
  quantity: currency
  unit: MEUR/a
  is_outcome: true
  input_nodes:
  - id: unit_prices
    to_dimensions:
    - id: outcome_of_interest
    - id: vehicle_type
  - id: passenger_km
    to_dimensions:
    - id: vehicle_type
  - id: outcome_stakeholder_matrix
    to_dimensions:
    - id: outcome_of_interest
    - id: stakeholder
  input_dimensions: [vehicle_type, outcome_of_interest, stakeholder]
  output_dimensions: [outcome_of_interest, stakeholder, vehicle_type]

- id: discounted_costs
  name: Discounted costs
  name_fi: Diskontatut kustannukset
  type: costs.ExponentialNode
  quantity: currency
  unit: MEUR/a
  input_dimensions: [stakeholder, outcome_of_interest]
  output_dimensions: [stakeholder, outcome_of_interest]
  input_nodes:
  - id: costs
    from_dimensions:
    - id: vehicle_type
      flatten: true
  params:
  - id: annual_change
    value: 3.0
    unit: '%'
    min_value: 0.0
    max_value: 5.0
  - id: is_decreasing_rate
    value: true

- id: test_investments
  name: Test node for traffic investments
  type: simple.FixedMultiplierNode
  quantity: currency
  unit: MEUR/a
  input_dimensions: [stakeholder, outcome_of_interest]
  output_dimensions: [stakeholder, outcome_of_interest]
  input_nodes:
  - discounted_costs
  params:
  - id: multiplier
    value: 0.2

actions:

- id: led_streetlights
  name: Change streetlights to LED
  type: simple.LinearCumulativeAdditiveAction
  quantity: emissions
  unit: kt/a
  forecast_values: [[2024, 0], [2030, -100]]
  output_nodes: [energy_electricity, investments]

- id: pv_electricity
  name: Build renewable electricity production (PV)
  type: simple.LinearCumulativeAdditiveAction
  quantity: emissions
  unit: kt/a
  forecast_values: [[2024, 0], [2030, -100]]
  output_nodes: [energy_electricity, investments]

- id: building_renovations
  name: Energy efficiency renovations in buildings
  type: simple.LinearCumulativeAdditiveAction
  quantity: emissions
  unit: kt/a
  forecast_values: [[2024, 0], [2030, -100]]
  output_nodes: [residential_electricity, investments]

- id: oil_to_geothermal
  name: Change oil to geothermal heating
  type: simple.LinearCumulativeAdditiveAction
  quantity: emissions
  unit: kt/a
  forecast_values: [[2024, 0], [2030, -100]]
  output_nodes: [residential_fuel, investments]

- id: city_fleet_to_electric
  name: Replace city fleet with electric vehicles
  type: simple.LinearCumulativeAdditiveAction
  quantity: emissions
  unit: kt/a
  forecast_values: [[2024, 0], [2030, -100]]
  output_nodes: [onroad_fuel, investments]

- id: electrify_public_transportation
  name: Electrify public transportation
  type: simple.LinearCumulativeAdditiveAction
  quantity: emissions
  unit: kt/a
  forecast_values: [[2024, 0], [2030, -100]]
  output_nodes: [onroad_fuel, investments]

- id: sustainable_transportation
  name: Some sustainable transportation action
  name_fi: Jokin toimenpide kestävän liikkumisen lisäämiseksi
  type: simple.TrajectoryAction
  quantity: mileage
  unit: Mpkm/a
  input_datasets:
  - id: budget/passenger_kilometers_by_action
    column: mileage
    forecast_from: 2024
  params:
  - id: dimension
    value: action
  - id: category
    value: activity
  output_dimensions: [vehicle_type]
  output_nodes:
  - id: walking
    from_dimensions:
    - id: vehicle_type
      categories: [walking]
      flatten: true
  - id: cycling
    from_dimensions:
    - id: vehicle_type
      categories: [cycling]
      flatten: true
  - id: bus_transit
    from_dimensions:
    - id: vehicle_type
      categories: [bus]
      flatten: true
  - id: tram_transit
    from_dimensions:
    - id: vehicle_type
      categories: [tram]
      flatten: true
  - id: person_mileage_car
    from_dimensions:
    - id: vehicle_type
      categories: [car]
      flatten: true

pages:
- id: home
  name: Budget sandbox
  path: /
  type: emission
  outcome_node: net_emissions
  lead_title: Sandbox for budgeting
  lead_paragraph: Testing budgeting functionalities

scenarios:

- id: baseline
  name: Baseline

- id: default
  name: Default
  default: true
  all_actions_enabled: true
