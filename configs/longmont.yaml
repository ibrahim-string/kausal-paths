# CHECK There was another slight update to the GHG inventory. Francie uploaded the newest version. It was just I66 on the On-Road data tab → Jouni
# CHECK Slight update to this paragraph in the Scenario Planning Actions, for the 100% RE action (check email from Apr 6th) → Jouni
# CHECK Francie has sent an email about emission factors going to 90 % reduction by the energy company, but the city wants to achieve 100 %.

#### FINAL_LONGMONT_2021_GHG_INVENTORY_04032023.XLSX
# Community indicators copied DONE
# Year over year sheet data copied for 2016, 2019, 2021. 
#   Population DONE
#   Emissions by sector (historical emissions) DONE
#   Stationary electricity use DONE
#   Natural gas use DONE
#   C&I diesel (stationary fuels) DONE
#   Leakage from natural gas and oil & gas wells DONE

# Status update
# Emission factors 
# Business as usual
# Electricity consumption
# Solid waste
# Oil and gas
# Transportation
# Electric grid
# Building energy
# Renewable energy
## STRATEGIES
#Use Updated Building Code and Enforce
#Develop 'beyond' building code
#Report and benchmark energy use
#Expand the Efficiency Works Program
#Electrify Buildings
#Develop a comprehensive 100% renewable energy plan for Longmont's just transition to a clean energy economy
#Accelerate and implement smart grid projects
#Encourage practices that reduce transmission and distribution losses
#Increase electric vehicles through vehicles incentives and improved infrastructure (savings from gasoline and additions from electricity)
#Address barriers to increase access and use of public transit, especially for underserved communities
#Develop multimodal transportation system
#Encourage regulations and policies that reduce oil and gas impacts 
#Scenario 1 Achieve 85% waste diversion by 2050.
#Scenario 2 Achieve 85% waste diversion by 2035 and 95% waste diversion by 2050. 

id: longmont
default_language: en
supported_languages: [es]
site_url: https://longmont.paths-test.kausal.tech
dataset_repo:
  url: https://github.com/kausaltech/dvctest.git
  commit: e6c7ab8e7b9cf4d3ecfafeed770e1d0f564bc26f
  dvc_remote: kausal-s3
name: Longmont Greenhouse gas inventory
owner_en: City of Longmont
theme_identifier: us-longmont
target_year: 2040
model_end_year: 2050
reference_year: 2016
minimum_historical_year: 2016
maximum_historical_year: 2021
emission_unit: t/a
emission_forecast_from: 2022
emission_dimensions: [emission_scope]
emission_dataset: longmont/greenhouse_gas_emissions_by_subsector
emission_sector_dimension: emission_sectors
normalizations:
- normalizer_node: population
  quantities:
  - id: emissions
    unit: t/cap/a
  - id: energy
    unit: kWh/cap/a
  - id: mileage
    unit: miles/cap/a
features:
  baseline_visible_in_graphs: false

action_groups:
- id: buildings
  name: Buildings
- id: transportation
  name: Transportation
- id: electric_grid
  name: Electric grid
- id: solid_waste
  name: Solid waste
- id: oil_and_gas
  name: Oil and gas
- id: trend
  name: Trends beyond own control

dimensions:
- id: emission_scope
  label: Emission scopes
  categories:
  - id: scope1
    label: Scope 1
    color: '#0f05a0'
    order: 0
  - id: scope2
    label: Scope 2
    color: '#30505e'
    order: 1
  - id: scope3
    label: Scope 3
    color: '#6496ff'
    order: 2
  - id: negative_emissions
    label: Negative emissions
    color: '#F7A5AF'
    order: -1

- id: emission_sectors
  label: Emission sectors
  categories:
  - id: stationary_energy
    label: Stationary energy
  - id: buildings
    label: Building energy
  - id: residential_energy
    label: Residential energy
  - id: commercial_industrial_energy
    label: Commercial and industrial energy
  - id: streetlights
    label: Streetlights
  - id: stationary_electricity
    label: Total electricity
  - id: stationary_natural_gas
    label: Total natural gas
  - id: stationary_diesel
    label: Total diesel
  - id: fugitive_emissions
    label: Fugitive emissions
  - id: leakage_from_natural_gas
    label: Leakage from natural gas
  - id: leakage_from_oil_and_gas_wells
    label: Total oil and gas wells
  - id: transmission_losses
    label: Transmission and distribution losses
  - id: transport
    label: Transportation
  - id: on_road_transportation
    label: Total on-road
  - id: aviation
    label: Aviation
  - id: railways
    label: Total railways
  - id: off_road
    label: Total off-road
  - id: waste
    label: Waste
  - id: waste_disposal
    label: Waste disposal
  - id: waste_water_treatment
    label: Waste water treatment
  - id: avoided_waste
    label: Total avoided emissions from recycling
  - id: ippu
    label: Industrial processes and product use
  - id: refridgerant
    label: Refridgerant emissions
  - id: afolu
    label: Agriculture, forestry, and other land use
  - id: food_consumption
    label: Food
  - id: textile_consumption
    label: Textiles
  - id: other_consumption
    label: Other consumption

- id: vehicle_type
  label: Vehicle type
  groups:
  - id: cars
    label: Cars
    id_match: ^car_.+
  - id: motorbikes
    label: Motorbikes
    id_match: ^motorbike_.+
  - id: buses
    label: Local buses
    id_match: ^buses_.+
  - id: trolleybuses
    label: Trolley buses
    id_match: ^trolley.*
  - id: coaches
    label: Coaches
    id_match: ^coach_.+
  - id: lorries
    label: Lorries
    id_match: ^lorry_.+
  - id: vans
    label: Vans
    id_match: ^van_.+
  - id: rail
    label: Rail transport
    id_match: ^(tram|small_railways|rail).*
  - id: maritime
    label: Maritime transport
    id_match: ^.*_ship_.*
  - id: mobility_outside_city
    label: Mobility ourside the city
    id_match: ^mobility_outside_city
  - id: aviation
    label: Aviation
    id_match: ^aviation

  categories:
  - id: motorcycle
    label: Motorcycle
  - id: car
    label: Passenger Car
  - id: light_duty
    label: Light Duty
  - id: bus
    label: Bus
  - id: single_unit_truck
    label: Single Unit Truck
  - id: combination_unit_truck
    label: Combination Unit Truck
  - id: car_petrol
    label: Passenger cars / Petrol
  - id: car_diesel
    label: Passenger cars / Diesel
  - id: car_natural_gas_biogas
    label: Passenger cars / Natural gas / biogas
  - id: car_ethanol
    label: Passenger cars / Ethanol
  - id: car_e85
    label: Passenger cars / E85
  - id: car_plugin_hybrid
    label: Passenger cars / Plug-in hybrid
  - id: car_batteryelectric
    label: Passenger cars / Battery-Electric
  - id: car_fuel_cell
    label: Passenger cars / Fuel cell
  - id: motorbike_petrol_4stroke
    label: Motorbikes / Petrol 4-stroke engine
  - id: motorbike_petrol_2stroke
    label: Motorbikes / Petrol 2-stroke engine
  - id: motorbike_batteryelectric
    label: Motorbikes / Battery-Electric
  - id: buses_diesel
    label: Regular buses / Diesel
  - id: buses_diesel_hybrid
    label: Regular buses / Diesel hybrid
  - id: buses_diesel_plugin_hybrid
    label: Regular buses / Diesel plug-in hybrid
  - id: buses_batteryelectric
    label: Regular buses / Battery-Electric
  - id: buses_fuel_cell
    label: Regular buses / Fuel cell
  - id: trolley
    label: Trolley buses
  - id: coach_diesel
    label: Coaches / Diesel
  - id: coach_natural_gas_biogas
    label: Coaches / Natural gas/Biogas
  - id: coach_battery_electric
    label: Coaches / Battery-Electric
  - id: coach_fuel_cell
    label: Coaches / Fuel cell
  - id: lorry_diesel
    label: Lorries / Diesel
  - id: lorry_natural_gas_biogas
    label: Lorries / Natural gas/Biogas
  - id: lorry_diesel_plugin_hybrid
    label: Lorries / Diesel plug-in hybrid
  - id: lorry_battery_electric
    label: Lorries / Battery-Electric
  - id: lorry_fuel_cell
    label: Lorries / Fuel cell
  - id: van_petrol
    label: Vans / Petrol
  - id: van_diesel
    label: Van / Diesel
  - id: van_natural_gas_biogas
    label: Van / Natural gas/Biogas
  - id: van_diesel_plugin_hybrid
    label: Van / Plug-in hybrid
  - id: van_battery_electric
    label: Van / Battery-Electric
  - id: van_fuel_cell
    label: Van / Fuel cell
  - id: tram
    label: Tram
  - id: small_railways
    label: Small railways
  - id: rail_passenger
    label: Rail (passenger transport)
  - id: rail_goods
    label: Rail (goods transport)
  - id: liner_ship_diesel
    label: Liner ship / Diesel
  - id: liner_ship_battery_electric
    label: Liner ship / Battery-Electric
  - id: private_ship_petrol
    label: Private ships / Petrol
  - id: private_ship_diesel
    label: Private ships / Diesel
  - id: private_ship_battery_electric
    label: Private ships / Battery-Electric
  - id: mobility_outside_city
    label: Mobility ourside the city (excl. aviation)
  - id: aviation
    label: Aviation

- id: greenhouse_gases
  label: Greenhouse gases
  categories:
  - id: co2_eq
    label: CO2 equivalent
  - id: co2
    label: CO2, fossil
    aliases: [co2_fossil]
  - id: ch4
    label: CH4
  - id: n2o
    label: N2O
  - id: hfc
    label: HFC
  - id: pfc
    label: PFC
  - id: sf6
    label: SF6
  - id: nf3
    label: NF3
  - id: co2_biogen
    label: CO2, biogen

- id: energy_carrier
  label: Energy carrier
  categories:
  - id: electricity
    label: Electricity
  - id: fuel_oil
    label: Heating oil
  - id: petrol
    label: Gasoline
    aliases: [Petrol]
  - id: diesel
    label: Diesel
  - id: ethanol
    label: Ethanol
  - id: plug_in_hybrid
    label: Plug-in hybrid EV
  - id: kerosene
    label: Jet fuel
  - id: aviation_gasoline
    label: Aviation gasoline
  - id: natural_gas
    label: Natural gas
  - id: biogas
    label: biogas
  - id: propane
    label: Propane
  - id: district_heat
    label: District heating
  - id: wood
    label: Wood
  - id: environmental_heat
    label: Environmental heat
  - id: solar_collectors
    label: Solar thermal collectors
  - id: waste
    label: Waste

- id: electricity_source
  label: Electricity source
  categories:
  - id: hydro
    label: Hydropower
  - id: nuclear
    label: Nuclear power
  - id: natural_gas
    label: Natural gas
  - id: solar
    label: Solar
  - id: biogas
    label: Biogas
  - id: waste
    label: Waste incineration
  - id: wind
    label: Wind
  - id: wood
    label: Wood
  - id: fuel_oil
    label: Heating oil
  - id: import
    label: European import
    aliases:
    - UCTE-Mix / ENTSO-E Mix
    - Nicht deklariert (UCTE)
    - Nicht deklariert (UCTE-Mix)
  - id: subsidized
    label: Subsidized electricity

- id: site
  label: Production or consumption site
  categories:
  - id: longmont_power
    label: Longmont Power
  - id: xcel_energy
    label: Xcel Energy
  - id: various
    label: Various
  - id: home
    label: Home

params:
- id: municipality_name
  value: longmont
- id: all_in_investment
  label: All investments happen on the first year (not continuously)
  is_customizable: false
  value: false
- id: discount_rate
  label: Discount rate (%/year)
  description: Speed of value decrease for monetary variables
  is_customizable: false
  value: 3.5
  min_value: 0
  max_value: 18
  step: 0.5
  unit: '%'
- id: renovation_rate_baseline
  label: Renovation rate baseline (%/year)
  is_customizable: false
  value: 0.5
  min_value: 0
  max_value: 2
  unit: '%/a'
- id: placeholder
  label: This is a placeholder for a local parameter updated_building_code_residential.enabled
  is_customizable: true
  value: true

emission_sectors:
- id: net_emissions
  name: Greenhouse gas emissions
  color: '#273E60'
  input_node_dimension:
    label: Emission sectors
  goals:
  - normalized_by: population
    values:
    - year: 2040
      value: 6.5
  is_outcome: true
  description: Greenhouse gas emissions

# Sector emissions

- id: stationary_energy_emissions
  name: Stationary energy emissions  # FIXME There is apparently double counting due to building_emissions
  part_of: net_emissions
  color: '#73C1B7'
  input_dataset_processors: [LinearInterpolation]

- id: transportation_emissions
  name: Transportation emissions
  part_of: net_emissions
  category: transport
  color: '#F4BD7B'
  input_dataset_processors: [LinearInterpolation]

- id: waste_emissions
  name: Waste emissions
  part_of: net_emissions
  color: '#D3805E'
  category: waste
  input_dataset_processors: [LinearInterpolation]

- id: ippu_emissions
  name: Industrial processes and product use emissions
  part_of: net_emissions
  color: '#6686B9'
  input_dataset_processors: [LinearInterpolation]

- id: afolu_emissions
  name: Agriculture,forestry, and other land use emissions
  category: afolu
  part_of: net_emissions
  color: '#5D9C6F'
  input_dataset_processors: [LinearInterpolation]

# Subsector emissions

- id: fugitive_emissions
  name: Fugitive emissions
  category: fugitive_emissions
  color: '#8DAFBC'
  part_of: stationary_energy_emissions
  input_dataset_processors: [LinearInterpolation]

# FIXME Building emissions have double counting
- id: building_emissions
  name: Building emissions
  category: buildings
  color: '#002F96'
  part_of: stationary_energy_emissions
  input_dataset_processors: [LinearInterpolation]

- id: waste_disposal_emissions
  name: Waste disposal emissions
  category: waste_disposal
  part_of: waste_emissions
  input_dataset_processors: [LinearInterpolation]

- id: waste_water_treatment_emissions
  name: Waste water treatment emissions
  category: waste_water_treatment
  part_of: waste_emissions
  input_dataset_processors: [LinearInterpolation]

- id: avoided_emissions_from_recycling
  name: Avoided emissions from recycling
  category: avoided_waste
  part_of: waste_emissions
  input_dataset_processors: [LinearInterpolation]

- id: refridgerant_emissions
  name: Refridgerant emissions
  category: refridgerant
  part_of: ippu_emissions
  input_dataset_processors: [LinearInterpolation]

- id: on_road_transportation_emissions
  name: On-road transportation
  category: on_road_transportation
  part_of: transportation_emissions
  input_dataset_processors: [LinearInterpolation]

- id: aviation_emissions
  name: Aviation_emissions
  category: aviation
  part_of: transportation_emissions
  input_dataset_processors: [LinearInterpolation]

- id: railways_emissions
  name: Railways emissions
  category: railways
  part_of: transportation_emissions
  input_dataset_processors: [LinearInterpolation]

- id: off_road_transportation
  name: Off-road transportation
  category: off_road
  part_of: transportation_emissions
  input_dataset_processors: [LinearInterpolation]

- id: leakage_from_natural_gas_emissions
  name: Emissions from natural gas leakage
  category: leakage_from_natural_gas
  part_of: fugitive_emissions
  input_dataset_processors: [LinearInterpolation]

- id: leakage_from_oil_and_gas_wells_emissions
  name: Emissions from leakages from oil and gas wells
  category: leakage_from_oil_and_gas_wells
  part_of: fugitive_emissions
  input_dataset_processors: [LinearInterpolation]

nodes:
- id: community_indicators
  name: Community indicators
  description: '<b>Required indicators</b>: <ul><li><b>Name of city</b>: Longmont</li>
    <li><b>State</b>: Colorado</li> <li><b>Country</b>: USA</li> <li><b>Inventory
    year</b>: 2021</li> <li><b>Inventory date</b>: 44197</li> <li><b>Geographic boundary</b>:
    City limits</li> <li><b>Land area (mi2)</b>: 28.78</li> <li><b>Resident population</b>:
    99629</li> <li><b>GDP ($) </b>: N/A</li> <li><b>Composition of economy</b>: Professional,
    technology and science; education; retail trade; health care and social assistance;
    acconodation and food services; manufacturing; admuinistrative and waste management;
    public administration; wholesale trade; construction</li> <li><b>Climate</b>:
    Semi-arid, continental climate</li> <li><b>Other information</b>: None</li></ul>
    <b>Optional Indicators</b>:<ul> <li><b>Input</b>: Value</li> <li><b>Number of
    housing units </b>: 40310</li> <li><b>Number of people employed in the city</b>:
    50034</li> <li><b>Heating degree days</b>: 4333</li> <li><b>Cooling degree days</b>:
    1562</li> <li><b>City Open Space (acres)</b>: 4118</li> <li><b>Total Taxes (dollars)</b>:
    90668608</li> <li><b>Retail Sales</b>: 2568515807.36544</li> <li><b>C&I Floor
    Space (sq. Ft.)</b>: 20655585</li></ul> <b>Notes</b>:<ol> <li>Land area and housing
    units data from Longmont Census QuickFacts.</li> <li>Resident population from
    2021 population document, on file. </li> <li>Data on composition of the economy
    from 2017 Community Profile, Longmont Economic Development Partnership: <a href="http://www.longmont.org/Longmont/media/Longmont/PDF%20Files/profile.pdf">link</a></li>
    <li>Employment data from Colorado Demographic Profile - 2020 <a href="https://gis.dola.colorado.gov/apps/ProfileDashboard2/">link</a>
    </li> <li>HDD and CDD data from zip Code 80501, <a href="http://www.weatherdatadepot.com/">link</a></li>
    <li>Open space acerage from <a href="https://www.longmontcolorado.gov/departments/departments-n-z/parks-open-space-trails/open-space/open-space-properties">link</a></li>
    <li>Tax data from Community Annual Financial Report: <a href="https://www.longmontcolorado.gov/home/showdocument?id=18581">link</a></li>
    <li>Retail sales data extrapolated based on 2021 Sales & Use Tax Revenue (<a href="https://www.longmontcolorado.gov/home/showdocument?id=18581">link</a>)
    and City Tax Rate (3.530%)</li> <li>Commercial and industrial square footage data
    from Boulder County Assessors Office (assessor@bouldercounty.org) </li></ol>'
  type: simple.AdditiveNode
  quantity: energy
  unit: GWh/a
  historical_values: [[2016, 0], [2021, 0]]

- id: population
  name: Inhabitants
  description: Population estimates from several sources. (a) 2016 - 2020 population
    estimates came from the Colorado Demography Office. Spreadsheet on file. (b) According
    to Longmont's Envision Plan (2016), Longmont's population is expected to grow
    by 24,165 residents from 2016 numbers by 2035. Population figures between 2021
    and 2035 assume a linear increase. (c) Population estimates between 2036 and 2050
    are based off the estimated annual population increase rate for Boulder County
    between 2035 and 2050. This rate is 0.501%. Raw data was taken from <a href="https://demography.dola.colorado.gov/assets/html/county.html">Colorado
    Department of Local Affairs</a>.
  type: simple.AdditiveNode
  quantity: population
  unit: cap
  historical_values: [[2010, 86270], [2016, 92858], [2017, 94461], [2018, 96398],
    [2019, 96577], [2020, 99129], [2021, 99629]]
  forecast_values: [[2022, 101517], [2023, 102711], [2024, 103906], [2025, 105100],
    [2030, 111072], [2035, 117045], [2040, 120006], [2045, 123042], [2050, 126156]]
  input_dataset_processors: [LinearInterpolation]

- id: global_warming_potential_100a
  name: Global warming potential 100 a
  type: emissions.GlobalWarmingPotential
  quantity: emission_factor
  unit: dimensionless
  output_dimensions: [greenhouse_gases]
  input_dataset_processors: [LinearInterpolation]
  historical_values: [[1990, 1], [2021, 1]]

- id: historical_emissions
  name: Historical emissions
  type: simple.AdditiveNode
  quantity: emissions
  unit: kt/a
  input_datasets:
  - id: longmont/greenhouse_gas_emissions_by_subsector
  output_dimensions: [emission_scope, emission_sectors]
  output_nodes:
  - id: residential_emissions
    from_dimensions:
    - id: emission_sectors
      categories: [residential_energy, commercial_industrial_energy]

- id: residential_emissions
  name: Residential emissions
  type: simple.AdditiveNode
  quantity: emissions
  unit: kt/a
  input_dimensions: [emission_scope, emission_sectors]
  output_dimensions: [emission_scope, emission_sectors]

#
# STATIONARY
#
- id: floor_increase_residential
  name: Relative residential floor area to current situation
  type: costs.ExponentialNode
  quantity: ratio
  unit: '%'
  historical_values: [[2016, 100], [2017, 100], [2018, 100], [2019, 100], [2020, 100],
    [2021, 100]]
  params:
  - id: current_value
    value: 100.0
    unit: '%'
  - id: annual_change
    value: 1.0
    unit: '%'
  - id: replace_output_using_input_dataset
    value: true

- id: floor_increase_commercial
  name: Relative commercial floor area to current situation
  type: costs.ExponentialNode
  quantity: ratio
  unit: '%'
  historical_values: [[2016, 100], [2017, 100], [2018, 100], [2019, 100], [2020, 100],
    [2021, 100]]
  params:
  - id: current_value
    value: 100.0
    unit: '%'
  - id: annual_change
    value: 1.0
    unit: '%'
  - id: replace_output_using_input_dataset
    value: true

- id: floor_increase
  name: Relative floor area
  description: In the excel model, 1 % increase is assumed until 2035 and then 0 %.
    Here, the increase continues.
  type: simple.AdditiveNode
  quantity: ratio
  unit: '%'
  output_dimensions: [emission_sectors]
  input_nodes:
  - id: floor_increase_residential
    to_dimensions:
    - id: emission_sectors
      categories: [residential_energy]
  - id: floor_increase_commercial
    to_dimensions:
    - id: emission_sectors
      categories: [commercial_industrial_energy]

- id: building_floor_area_historical
  name: Building floor area, historical
  type: simple.AdditiveNode
  quantity: floor_area
  unit: ft**2
  input_datasets:
  - longmont/building_floor_area
  input_dimensions: [emission_sectors]
  output_dimensions: [emission_sectors]

- id: building_floor_area
  name: Building floor area
  type: simple.MultiplicativeNode
  quantity: floor_area
  unit: ft**2
  input_nodes:
  - id: floor_increase
  - id: building_floor_area_historical
    tags: [non_additive]
  input_dimensions: [emission_sectors]
  output_dimensions: [emission_sectors]

- id: commercial_square_footage_over_20000_sf
  name: Commercial square footage over 20,000 square feet
  type: simple.AdditiveNode
  quantity: floor_area
  unit: ft**2
  input_datasets:
  - id: longmont/commercial_square_footage_over_20000_sf

- id: natural_gas_consumption_large_commercial
  name: Natural gas use of large commercial buildings
  type: simple.UsBuildingNode
  quantity: energy
  unit: therm/a
  input_nodes:
  - id: benchmark_energy_use
    metrics: [triggered, compliant, improvement]
    to_dimensions:
    - id: emission_sectors
      categories: [commercial_industrial_energy]
      flatten: true
  - commercial_square_footage_over_20000_sf
  - natural_gas_commercial_eui
  output_nodes:
  - id: building_natural_gas_consumption
    to_dimensions:
    - id: emission_sectors
      categories: [commercial_industrial_energy]

# Total Floor area: Building 55:56
# standard energy consumption of existing buildings: MISSING
# standard energy consumption of new buildings: building 57:60
# standard energy consumption of new buildings with action: Buildings 61:64 = 0.95 * EUI
# New floor area: Buildings 70:71
# Energy consumption of new buildings: Buildings 72:75 =
## new floor area * compliant * better EUI + new floor area * non-compliant * normal EUI -- cumulated
# Renovated existing buildings: Buildings 77:78 = existing buildings * triggered
# Energy consumption of existing renovated buildings: Buildings 79:82 = 
## renovated floor area * compliant * better EUI + renovated floor area * non-compliant * normal EUI - cumulated
# Energy consumption of existing non-renovated buildings: MISSING

- id: electricity_residential_eui
  name: Electricity residential energy use intensity EUI
  type: simple.MultiplyLastBuildingNode
  quantity: consumption_factor
  unit: kWh/ft**2/a
  input_datasets:
  - id: longmont/building_energy_use_intensity_eui
    column: electricity
    filters:
    - column: emission_sectors
      value: residential_energy
  input_nodes:
  - id: updated_building_code_residential
    metric: Value
    tags: non_additive

- id: electricity_commercial_eui
  name: Electricity commercial energy use intensity EUI
  type: simple.MultiplyLastBuildingNode
  quantity: consumption_factor
  unit: kWh/ft**2/a
  input_datasets:
  - id: longmont/building_energy_use_intensity_eui
    column: electricity
    filters:
    - column: emission_sectors
      value: commercial_industrial_energy
  input_nodes:
  - id: updated_building_code_commercial
    metric: Value
    tags: non_additive

- id: natural_gas_residential_eui
  name: Natural gas residential energy use intensity EUI
  type: simple.MultiplyLastBuildingNode
  quantity: consumption_factor
  unit: kWh/ft**2/a
  input_datasets:
  - id: longmont/building_energy_use_intensity_eui
    column: natural_gas
    filters:
    - column: emission_sectors
      value: residential_energy
  input_nodes:
  - id: updated_building_code_residential
    metric: Value
    tags: non_additive

- id: natural_gas_commercial_eui
  name: Natural gas commercial energy use intensity EUI
  type: simple.MultiplyLastBuildingNode
  quantity: consumption_factor
  unit: therm/ft**2/a
  input_datasets:
  - id: longmont/building_energy_use_intensity_eui
    column: natural_gas
    filters:
    - column: emission_sectors
      value: commercial_industrial_energy
  input_nodes:
  - id: updated_building_code_commercial
    metric: Value
    tags: non_additive

- id: natural_gas_large_commercial_eui
  name: Natural gas energy use intensity EUI for large commercial buildings
  type: simple.MultiplyLastBuildingNode
  quantity: consumption_factor
  unit: therm/ft**2/a
  input_datasets:
  - id: longmont/building_energy_use_intensity_eui
    column: natural_gas
    filters:
    - column: emission_sectors
      value: commercial_industrial_energy
  input_nodes:
  - id: benchmark_energy_use
    metric: improvement
    tags: non_additive

- id: building_electricity_consumption_residential_wo_saving
  name: Building electricity consumption residential without savings
  type: simple.UsBuildingNode
  quantity: energy
  unit: GWh/a
  input_nodes:
  - id: updated_building_code_residential
    metrics: [triggered, compliant, improvement]
    to_dimensions:
    - id: emission_sectors
      categories: [residential_energy]
  - id: building_floor_area
    from_dimensions:
    - id: emission_sectors
      categories: [residential_energy]
      flatten: true
  - id: electricity_residential_eui
    to_dimensions:
    - id: emission_sectors
      categories: [residential_energy]

- id: building_electricity_consumption_residential
  name: Building electricity consumption residential
  type: simple.MultiplyLastNode
  quantity: energy
  unit: GWh/a
  input_nodes:
  - id: building_electricity_consumption_residential_wo_saving
  - id: efficiency_works_program
    tags: [non_additive]

- id: building_electricity_consumption_commercial
  name: Building electricity consumption commercial
  type: simple.MultiplyLastNode
  quantity: energy
  unit: GWh/a
  input_nodes:
  - id: building_electricity_consumption_commercial_wo_saving
  - id: efficiency_works_program
    tags: [non_additive]

- id: building_natural_gas_consumption_residential
  name: Building natural gas consumption residential
  type: simple.UsBuildingNode
  quantity: energy
  unit: therm/a
  input_nodes:
  - id: updated_building_code_residential
    metrics: [triggered, compliant, improvement]
    to_dimensions:
    - id: emission_sectors
      categories: [residential_energy]
  - id: building_floor_area
    from_dimensions:
    - id: emission_sectors
      categories: [residential_energy]
      flatten: true
  - natural_gas_residential_eui

- id: building_electricity_consumption_commercial_wo_saving
  name: Building electricity consumption commercial without savings
  type: simple.UsBuildingNode
  quantity: energy
  unit: GWh/a
  input_nodes:
  - id: updated_building_code_commercial
    metrics: [triggered, compliant, improvement]
  - id: building_floor_area
    from_dimensions:
    - id: emission_sectors
      categories: [commercial_industrial_energy]
      flatten: true
  - electricity_commercial_eui

- id: building_natural_gas_consumption_commercial
  name: Building natural gas consumption commercial
  type: simple.UsBuildingNode
  quantity: energy
  unit: therm/a
  input_nodes:
  - id: updated_building_code_commercial
    metrics: [triggered, compliant, improvement]
  - id: building_floor_area
    from_dimensions:
    - id: emission_sectors
      categories: [commercial_industrial_energy]
      flatten: true
  - natural_gas_commercial_eui

- id: building_electricity_consumption
  name: Building electricity consumption
  type: simple.AdditiveNode
  quantity: energy
  unit: GWh/a
  input_dimensions: [emission_sectors]
  output_dimensions: [emission_sectors]
  input_nodes:
  - id: building_electricity_consumption_residential
    to_dimensions:
    - id: emission_sectors
      categories: [residential_energy]
  - id: building_electricity_consumption_commercial
    to_dimensions:
    - id: emission_sectors
      categories: [commercial_industrial_energy]
  output_nodes:
  - id: electricity_consumption
    to_dimensions:
    - id: site
      categories: [longmont_power]
    - id: emission_sectors

- id: electricity_consumption
  name: Electricity consumption
  type: simple.AdditiveNode
  quantity: energy
  unit: GWh/a
  input_dimensions: [emission_sectors, site]
  output_dimensions: [emission_sectors, site]

- id: change_xcel_electricity_emission_factor
  name: Expected change in Xcel Energy electricity emission factors
  description: Although most of Longmont’s electricity is provided by Longmont Power
    & Communications and Platte River Power Authority, there is a small portion that
    is from Xcel Energy. Xcel Energy has committed to reducing carbon emissions 80%
    by 2030 from a 2005 baseline and to being a zero-carbon electric utility by 2050.
    This target and goal is integrated into Longmont’s future emission projections.
  type: simple.AdditiveNode
  quantity: emission_factor
  unit: t/MWh
  historical_values: [[2016, 0], [2021, 0]]
  forecast_values: [[2030, -0.2759508], [2050, -0.4442868]]
  input_dataset_processors: [LinearInterpolation]
  output_nodes:
  - id: electricity_emission_factor
    to_dimensions:
    - id: greenhouse_gases
      categories: [co2]
    - id: site
      categories: [xcel_energy]

- id: electricity_emission_factor
  name: Emission factor of electricity production
  type: simple.AdditiveNode
  quantity: emission_factor
  unit: t/MWh
  input_datasets:
  - longmont/electricity_emission_factor
  input_dataset_processors: [LinearInterpolation]
  #forecast_values: [[2025, 0.5195], [2026, 0.5156], [2027, 0.5132], [2028, 0.5433], [2029, 0.5424], [2030, 0.5253], [2035, 0.5253], [2040, 0.5253], [2045, 0.5253], [2050, 0.5253]]
  input_dimensions: [site, greenhouse_gases]
  output_dimensions: [site, greenhouse_gases]
  output_nodes:
  - id: equity_share_emissions
    from_dimensions:
    - id: site
      categories: [longmont_power]
      flatten: true
    to_dimensions:
    - id: greenhouse_gases

- id: beyond_electricity_commercial_eui
  name: Beyond electricity commercial energy use intensity EUI
  type: simple.MultiplyLastBuildingNode
  quantity: consumption_factor
  unit: kWh/ft**2/a
  input_datasets:
  - id: longmont/building_energy_use_intensity_eui
    column: electricity
    filters:
    - column: emission_sectors
      value: commercial_industrial_energy
  input_nodes:
  - id: develop_beyond_building_code
    metric: Value
    tags: non_additive

- id: beyond_code_electricity_commercial  # FIXME This is double counting. Not clear how this should be done.
  name: Electricity use after beyond code action
  type: simple.UsBuildingNode
  quantity: energy
  unit: kWh/a
  input_nodes:
  - id: building_floor_area
    from_dimensions:
    - id: emission_sectors
      categories: [commercial_industrial_energy]
      flatten: true
  - id: develop_beyond_building_code
    metrics: [triggered, compliant, improvement]
  - id: beyond_electricity_commercial_eui
  output_nodes:
  - id: building_electricity_consumption
    to_dimensions:
    - id: emission_sectors
      categories: [commercial_industrial_energy]


# Building model, updated building code
# Floor area increses by B32 every year. categories residential, commercial
# Energy use intensity EUI improves every three years to the most recent IECC(?)
# Most recent IECC improves by C34 annually
# Existing building go through energy improvement 1 %
# New buildings: 90 % are compliant and have X % lower energy consumption
# Electricity and gas separately, for residential and commercial
# Energy saving = affected area * saved energy factor * compliant fraction; cumulatively
# Savings separately for new and existing buildings
# Emissions = energy * emission factors for electricity or natural gas (per ghg gas)

# Develop beyond bulding code
# New buildings only
# Estimated savings beyond IECC: goes from 0 to 100 % between 2017 and 2030
# energy efficiency = EUI with most recent IECC * (1-savings)
# Natural gas savings: subtract the impacts of electrification of heating
# Emissions = as above

# Report benchmark energy use
# Commercial area over 20000 sqft (increases by B33 every year)
# Percent participation: goes non-linearly fom 88 to 99 % between 2023 and  2029
# Percent saving: goes non-linearly from 2.4 to 0 % between 2023 and 2029; cumulatively
# Emissions = as above

# Expand the Efficiency Works Program
# Percent savings: after gradual increase 2016-2025, is constant C55.
# Energy = savings * total electricity consumption BAU!M44 (residence, commercial + losses)
# Emissions = as above

# Electrify buildings
# If time > electrification start year 2023, then use model input values for saving estimates
# Emission reduction is estimated to come from reduced natural gas, and the respective
# amount of additional electricity consumption is then added (with a factor conversion,
# but we want to rather use floor area changes)

- id: electricity_consumption_emissions
  name: Electricity consumption emissions
  type: simple.EmissionFactorActivity
  quantity: emissions
  unit: t/a
  output_dimensions: [greenhouse_gases, emission_sectors, site]
  input_nodes:
  - id: electricity_consumption
    to_dimensions:
    - id: emission_sectors
    - id: site
  - id: electricity_emission_factor
    to_dimensions:
    - id: greenhouse_gases
    - id: site
  output_nodes:
  - id: building_emissions
    from_dimensions:
    - id: site
      flatten: true
    - id: greenhouse_gases
      flatten: true
    - id: emission_sectors
      flatten: true
    to_dimensions:
    - id: emission_scope
      categories: [scope2]

- id: electricity_replacing_natural_gas_residential
  name: Electricity that replaces natural gas in residential buildings
  type: simple.FixedMultiplierNode
  quantity: energy
  unit: kWh/a
  params:
  - id: multiplier
    value: -0.33
  output_nodes:
  - id: building_electricity_consumption
    to_dimensions:
    - id: emission_sectors
      categories: [residential_energy]

- id: electricity_replacing_natural_gas_commercial
  name: Electricity that replaces natural gas in commercial buildings
  type: simple.FixedMultiplierNode
  quantity: energy
  unit: kWh/a
  params:
  - id: multiplier
    value: -0.39
  output_nodes:
  - id: building_electricity_consumption
    to_dimensions:
    - id: emission_sectors
      categories: [commercial_industrial_energy]

# Natural gas

- id: building_natural_gas_consumption
  name: Building natural gas consumption
  type: simple.AdditiveNode
  quantity: energy
  unit: Mthm/a
  input_dimensions: [emission_sectors]
  output_dimensions: [emission_sectors]
  input_nodes:
  - id: building_natural_gas_consumption_residential
    to_dimensions:
    - id: emission_sectors
      categories: [residential_energy]
  - id: building_natural_gas_consumption_commercial
    to_dimensions:
    - id: emission_sectors
      categories: [commercial_industrial_energy]

- id: emission_factor_natural_gas
  name: Emission factor of natural gas
  type: simple.AdditiveNode
  quantity: emission_factor
  unit: t/thm
  input_datasets:
  - longmont/emission_factor_natural_gas
  input_dataset_processors: [LinearInterpolation]
  output_dimensions: [energy_carrier, greenhouse_gases]

- id: natural_gas_consumption_emissions
  name: Natural gas consumption emissions
  type: simple.EmissionFactorActivity
  quantity: emissions
  unit: t/a
  output_dimensions: [emission_sectors, greenhouse_gases, energy_carrier]
  input_nodes:
  - id: building_natural_gas_consumption
    to_dimensions:
    - id: emission_sectors
    - id: energy_carrier
      categories: [natural_gas]
  - id: emission_factor_natural_gas
    to_dimensions:
    - id: greenhouse_gases
    - id: energy_carrier
  output_nodes:
  - id: building_emissions
    from_dimensions:
    - id: energy_carrier
      flatten: true
    - id: greenhouse_gases
      flatten: true
    - id: emission_sectors
      flatten: true
    to_dimensions:
    - id: emission_scope
      categories: [scope1]

# Other fuels

- id: stationary_fuel_consumption
  name: Other stationary fuel consumption
  type: simple.AdditiveNode
  quantity: energy
  unit: gal/a
  input_datasets:
  - longmont/stationary_fuel_use
  input_dimensions: [emission_sectors, energy_carrier]
  output_dimensions: [emission_sectors, energy_carrier]

- id: emission_factor_fuel
  name: Emission factor of stationary fuels
  type: simple.AdditiveNode
  quantity: emission_factor
  unit: t/gal
  input_datasets:
  - longmont/emission_factor_fuels
  output_dimensions: [energy_carrier, greenhouse_gases]

- id: stationary_fuel_consumption_emissions
  name: Stationary fuel consumption emissions
  description: <p>1) Stationary Diesel Use data was provided by CDPHE. Spreadsheet
    on file.</p> <p>2) Xcel Energy emission factor, electricity and natural gas usage
    data, and renewable energy data is from Xcel's 2021 Community Energy Report for
    Longmont, on file.</p> <p>3) Longmont Power & Communications data provided. PDF
    on file. The commercial buildings in Longmont's Weld County portion consumed 31,000,000
    kWh in 2021.</p> <p>4) T&D losses are calculated for Xcel and Longmont based on
    the EIA 861 (https://www.eia.gov/electricity/data/eia861/) reported data. Specifically
    the Utility Operational Data_2021. Spreadsheet on file.</p> <p>5) Propane data
    provided by FerrellGas. Spreadsheet on file.</p> <p>6) Houses heated with wood
    were pulled from the US Census Bureau, data on file. It was assumed that all of
    the houses heated by wood in Longmont fell within the Boulder County portion of
    Longmont.</p> <p>7) Longmont Power and Communications data was provided by Longmont
    Power & Communications. PDF on file.</p> <p>8) Longmont Power & Communications
    and Lyons Municipal rooftop solar data was provided in kW of capacity rather than
    kWh generated. NREL's PVWatts was used to estimate kWh generated by rooftop solar
    systems. PDF of results on file. See https://pvwatts.nrel.gov/</p> <p>10) Due
    to Xcel's 15/15 rule, with less than 15 customers in the commercial and residential
    data sets they cannot provide usage for those customers to avoid violating privacy
    concerns. Therefore Lotus applied the average residential and commercial kWh use
    from LPC to the 7 residential and commercial customers (respectively) in Xcel
    territory to estimate use.</p> <p>11) PRPA emission factor and transmission and
    distribution loss rate for 2021 was provided. Email on file. Emissions factor
    value represents Longmont's load share emissions rate without unbundled RECs.</p>
  type: simple.EmissionFactorActivity
  quantity: emissions
  unit: t/a
  output_dimensions: [greenhouse_gases, emission_sectors, energy_carrier]
  input_nodes:
  - id: stationary_fuel_consumption
    to_dimensions:
    - id: emission_sectors
    - id: energy_carrier
  - id: emission_factor_fuel
    to_dimensions:
    - id: greenhouse_gases
    - id: energy_carrier
  output_nodes:
  - id: building_emissions
    from_dimensions:
    - id: energy_carrier
      flatten: true
    - id: greenhouse_gases
      flatten: true
    - id: emission_sectors
      flatten: true
    to_dimensions:
    - id: emission_scope
      categories: [scope1]

# Wood

- id: stationary_wood_consumption
  name: Stationary wood consumption
  type: simple.AdditiveNode
  quantity: energy
  unit: MMBtu/a
  input_datasets:
  - longmont/stationary_wood_consumption
  input_dimensions: [emission_sectors]
  output_dimensions: [energy_carrier, emission_sectors]

- id: emission_factor_wood
  name: Emission factor of wood
  type: simple.AdditiveNode
  quantity: emission_factor
  unit: kg/MMBtu
  input_datasets:
  - longmont/emission_factor_wood
  output_dimensions: [energy_carrier, greenhouse_gases]

- id: wood_consumption_emissions
  name: Wood consumption emissions
  type: simple.EmissionFactorActivity
  quantity: emissions
  unit: t/a
  output_dimensions: [greenhouse_gases, emission_sectors, energy_carrier]
  input_nodes:
  - id: stationary_wood_consumption
    to_dimensions:
    - id: emission_sectors
    - id: energy_carrier
      categories: [wood]
  - id: emission_factor_wood
    to_dimensions:
    - id: greenhouse_gases
    - id: energy_carrier
  output_nodes:
  - id: building_emissions
    from_dimensions:
    - id: energy_carrier
      flatten: true
    - id: greenhouse_gases
      flatten: true
    - id: emission_sectors
      flatten: true
    to_dimensions:
    - id: emission_scope
      categories: [scope2]

# Losses

- id: electricity_loss_fraction
  name: Electricity loss fraction
  type: simple.AdditiveNode
  quantity: fraction
  unit: '%'
  input_datasets:
  - longmont/transmission_and_distribution_loss
  output_dimensions: [energy_carrier, site]
  output_nodes:
  - id: electricity_losses
    from_dimensions:
    - id: energy_carrier
      categories: [electricity]
      flatten: true
    to_dimensions:
    - id: site

- id: electricity_losses
  name: Electricity losses
  type: simple.MultiplicativeNode
  quantity: energy
  unit: GWh/a
  input_dimensions: [site, emission_sectors]
  output_dimensions: [site, emission_sectors]
  input_nodes:
  - id: electricity_consumption
    tags: [non_additive]
    to_dimensions:
    - id: site
      categories: [longmont_power]
    - id: emission_sectors

- id: electricity_loss_emissions
  name: Emissions due to electricity losses
  type: simple.EmissionFactorActivity
  quantity: emissions
  unit: t/a
  input_nodes:
  - id: electricity_losses
    to_dimensions:
    - id: emission_sectors
    - id: site
  - id: electricity_emission_factor
    to_dimensions:
    - id: site
    - id: greenhouse_gases
  output_dimensions: [site, greenhouse_gases, emission_sectors]
  output_nodes:
  - id: electricity_consumption_emissions
    to_dimensions:
    - id: site
    - id: emission_sectors
    - id: greenhouse_gases

#
# TRANSPORTATION
#

- id: emission_factor_fuels
  name: Fuel emission factors
  type: simple.AdditiveNode
  quantity: emission_factor
  unit: kg/gal
  input_datasets:
  - longmont/emission_factor_fuels
  input_dimensions: [energy_carrier, greenhouse_gases]
  output_dimensions: [energy_carrier, greenhouse_gases]

- id: registered_vehicles
  name: Registered vehicles
  type: simple.FixedMultiplierNode
  quantity: number
  unit: pcs
  input_nodes:
  - population
  params:
  - id: multiplier
    value: 0.8140
    unit: pcs/person
    is_customizable: false

#- id: vehicle_fuel_efficiency
#  name: Vehicle fuel efficiency
#  type: simple.AdditiveNode
#  quantity: emission_factor
#  unit: miles/gallon
#  input_datasets:
#  - longmont/fuel_consumption_by_vehicle_type
#  input_dimensions: [vehicle_type]
#  output_dimensions: [vehicle_type]

# Equity shares (not part of the main emission inventory)

- id: equity_share_electricity_use
  name: Equity share electricity use
  type: simple.AdditiveNode
  quantity: energy
  unit: kWh/a
  historical_values: [[2016, 1210910586.71672], [2017, 1201888286.76237], [2018, 1215917061.77312],
    [2019, 1212866104.25016], [2020, 1219903307.18383], [2021, 1226940510.11749]]
  foreast_values: [[2022, 1233977713.05115], [2030, 1290275336.52046], [2050, 1431019395.19372]]

- id: equity_share_emissions
  name: Equity share emissions
  description: <p>Informational only item. These are the emissions that are attributable
    to Longmont’s ownership of what Platte River Power Authority sells outside of
    the four owner communities.</p> <p>Platte River Power Authority (PRPA) provided
    data on Longmont's equity share of emissions, which are based on the resource
    mix of all power purchased, generated, and supplied by PRPA to it's customers.
    Longmont's equity share of emissions represents the City's 26.13% ownership in
    PRPA, and therefore the same share of responsibility for PRPA's emissions generated
    in 2021. This equity share value is provided here for information only, and is
    not included in GPC totals. The use of electricity supplied by PRPA in Longmont
    (i.e., Longmont's load share emissions) is included in the calculation of total
    PRPA emissions.</p>
  type: simple.EmissionFactorActivity
  quantity: emissions
  unit: t/a
  is_outcome: true
  output_dimensions: [greenhouse_gases]
  input_nodes:
  - equity_share_electricity_use

- id: electricity_per_area
  name: Electricity consumption per floor area
  type: simple.AdditiveNode
  quantity: energy_per_area
  unit: kWh/ft**2/a
  input_datasets:
  - id: longmont/building_energy_use_intensity_eui
    column: electricity
  input_dimensions: [emission_sectors]
  output_dimensions: [emission_sectors]

- id: participation_smart_grid
  name: Participation in smart grid projects
  type: simple.AdditiveNode
  quantity: fraction
  unit: '%'
  historical_values: [[2017, 0], [2018, 2], [2019, 5], [2020, 7], [2021, 9]]

- id: smart_grid_improvement
  name: Relative improvement due to smart grid implementation
  type: simple.AdditiveNode
  quantity: fraction
  unit: '%'
  historical_values: [[2016, 0], [2021, 0]]

- id: smart_grid_benefits
  name: Smart grid action benefits
  type: simple.MultiplicativeNode
  quantity: fraction
  unit: '%'
  input_nodes:
  - id: participation_smart_grid
    tags: [non_additive]
  - id: smart_grid_improvement
    tags: [non_additive]

- id: transmission_loss_change
  name: Transmission_loss_changes
  type: simple.AdditiveNode
  quantity: fraction
  unit: '%'

actions:

- id: updated_building_code_residential
  name: Use updated building code and enforce in residential buildings
  description: '<p>Adopt and enforce the latest IECC every year a new IECC is released,
    rather than adopting it on the third year.</p> <p>Existing buildings: Percentage
    of residential square footage triggering code upgrades</p><p>Target reduction:
    1%</p><p>Confidence ranking: Low</p><p>Assumption. No data resides with the City.
    They support this assumption.</p><p><b>Source.</b> On file.</p> <p>New buildings:
    Average percent increase of new residential buildings Target reduction: 1% Confidence
    ranking:  Med. Data provided by the Boulder County assessor shows historic trends
    that may overestimate continued growth. Information from the City of Longmont
    suggests annual increases of 1%. Potential buildout around 2035. New square footage
    remains constant after 2035. Assume constant increase over time. On file.</p>'
  type: energy_saving.FutureBuildingActionUs
  quantity: fraction
  unit: '%'
  group: buildings
  params:
  - id: compliant
    value: 90.0
  - id: triggered
    value: 1.0
    min_value: 0.0
    max_value: 3.0
    description: Percentage of square footage triggering code upgrades
  - id: improvement
    value: 5.0
    min_value: 3.0
    max_value: 7.0
    description: Percentage increase in efficiency on top of past upgrades

- id: updated_building_code_commercial
  name: Use updated building code and enforce in commercial buildings
  description: '<p>Adopt and enforce the latest IECC every year a new IECC is released,
    rather than adopting it on the third year.</p> <p>Existing buildings: Percentage
    of commeercial square footage triggering code upgrades</p><p>Target reduction:
    1%</p><p>Confidence ranking: Low</p><p>Assumption. No data resides with the City.
    They support this assumption.</p><p><b>Source.</b> On file.</p> <p>New buildings:
    Average percent increase of new residential buildings Target reduction: 1% Confidence
    ranking:  Med. Data provided by the Boulder County assessor shows historic trends
    that may overestimate continued growth. Information from the City of Longmont
    suggests annual increases of 1%. Potential buildout around 2035. New square footage
    remains constant after 2035. Assume constant increase over time. On file.</p>'
  type: energy_saving.FutureBuildingActionUs
  quantity: fraction
  unit: '%'
  group: buildings
  params:
  - id: compliant
    value: 90.0
  - id: triggered
    value: 1.0
    min_value: 0.0
    max_value: 3.0
    description: Percentage of square footage triggering code upgrades
  - id: improvement
    value: 11.0
    min_value: 5.0
    max_value: 15.0
    description: Percentage increase in efficiency on top of past upgrades

- id: develop_beyond_building_code
  name: Develop beyond building code
  description: Develop building codes that go beyond the IECC and towards net-zero
    energy use, including the Climate Action Recommendations Report strategies to
    add solar ready and electric vehicle ready as part of the 2021 residential code
    update. <b>NOTE! This action causes double counting; it will be fixed.</b>
  type: energy_saving.FutureBuildingActionUs
  quantity: fraction
  unit: '%'
  group: buildings
  input_datasets:
  - id: longmont/improvements_beyond_building_code
    filters:
    - column: emission_sectors
      value: [commercial_industrial_energy]

- id: benchmark_energy_use
  name: Report and benchmark energy use in commercial buildings
  description: Requires commercial and industrial buildings owners whose buildings
    exceed 20,000 square feet to rate their building's energy use, report energy metrics,
    and encourages buildings owners to implement energy efficiency measures. For updates,
    see <a href="https://longmont-sca.watch-test.kausal.tech/actions/E-5">action description</a>.
  type: energy_saving.FutureBuildingActionUs
  quantity: fraction
  unit: '%'
  group: buildings
  input_datasets:
  - id: longmont/benchmark_commercial_energy_use_action
    filters:
    - column: emission_sectors
      value: commercial_industrial_energy

- id: efficiency_works_program
  name: Expand the Efficiency Works Program
  description: Expand the Efficiency Works Program to achieve 2% energy savings by
    2025 through commercial retro-commissioning, low-income programs, and residential
    and commercial savings.
  type: simple.AdditiveAction
  quantity: fraction
  unit: '%'
  group: buildings
  historical_values: [[2016, 0.0], [2017, 0], [2018, 0], [2019, 0], [2020, 0]]
  forecast_values: [[2021, 1], [2022, 1.25], [2023, 1.5], [2024, 1.75], [2025, 2],
    [2026, 2], [2027, 2], [2028, 2], [2029, 2], [2030, 2], [2031, 2], [2032, 2], [
      2033, 2], [2034, 2], [2035, 2], [2036, 2], [2037, 2], [2038, 2], [2039, 2],
    [2040, 2], [2041, 2], [2042, 2], [2043, 2], [2044, 2], [2045, 2], [2046, 2], [
      2047, 2], [2048, 2], [2049, 2], [2050, 2]]

- id: replace_natural_gas_residential
  name: Beneficial Building Electrification Residential
  description: Converting residential building systems that use fossil fuels (gas,
    oil, or propane) to high efficiency electric equipment powered by increasingly
    clean and renewable electricity. Savings are modeled with projected renewable
    energy emission factors.
  type: simple.CumulativeAdditiveAction
  quantity: energy
  unit: ktherm/a
  group: buildings
  forecast_values: [[2021, 0], [2022, 0], [2023, -192.409], [2024, -192.409], [2025,
      -192.409], [2026, -192.409], [2027, -192.409], [2028, -192.409], [2029, -192.409],
    [2030, -192.409], [2031, -1243.774], [2032, -1243.774], [2033, -1243.774], [2034,
      -1243.774], [2035, -1243.774], [2036, -1243.774], [2037, -1243.774], [2038,
      -1243.774], [2039, -1243.774], [2040, -1243.774], [2041, -1243.774], [2042,
      -1243.774], [2043, -1243.774], [2044, -1243.774], [2045, -1243.774], [2046,
      -1243.774], [2047, -1243.774], [2048, -1243.774], [2049, -1243.774], [2050,
      -1243.774]]
  output_nodes:
  - id: building_natural_gas_consumption
    to_dimensions:
    - id: emission_sectors
      categories: [residential_energy]
  - id: electricity_replacing_natural_gas_residential

- id: replace_natural_gas_commercial
  name: Beneficial Building Electrification Commercial
  description: Converting commercial building systems that use fossil fuels (gas,
    oil, or propane) to high efficiency electric equipment powered by increasingly
    clean and renewable electricity. Savings are modeled with projected renewable
    energy emission factors.
  type: simple.CumulativeAdditiveAction
  quantity: energy
  unit: ktherm/a
  group: buildings
  forecast_values: [[2021, 0], [2022, 0], [2023, -88.707], [2024, -88.707], [2025,
      -88.707], [2026, -88.707], [2027, -88.707], [2028, -88.707], [2029, -88.707],
    [2030, -88.707], [2031, -741.592], [2032, -741.592], [2033, -741.592], [2034,
      -741.592], [2035, -741.592], [2036, -741.592], [2037, -741.592], [2038, -741.592],
    [2039, -741.592], [2040, -741.592], [2041, -741.592], [2042, -741.592], [2043,
      -741.592], [2044, -741.592], [2045, -741.592], [2046, -741.592], [2047, -741.592],
    [2048, -741.592], [2049, -741.592], [2050, -741.592]]
  output_nodes:
  - id: building_natural_gas_consumption
    to_dimensions:
    - id: emission_sectors
      categories: [commercial_industrial_energy]
  - id: electricity_replacing_natural_gas_commercial

#- id: renewable_energy_plan
#  name: Develop a comprehensive 100% renewable energy plan
#  description: Develop a comprehensive 100% renewable energy plan for Longmont's just
#    transition to a clean energy economy. Acquire all electricity from renewable energy
#    sources by 2030.
#  type: simple.AdditiveAction
#  quantity: fraction
#  unit: '%'
#  forecast_values: [[2023, 0], [2050, 0]]

- id: smart_grid_projects
  name: Accelerate and implement smart grid projects
  description: Implement a variety of smart grid projects that encourage reductions
    in electricity consumption through real-time feedback, dynamic pricing, etc. LPC
    is currently working with consultants to develop a Smart Grid Roadmap + CIP that
    will evaluate the distribution grid relative to increased load, areas for investment/improvement,
    areas of vulnerability, the best placement for battery energy storage, and smart
    grid technologies through the development of a CIP plan for the next 5-20 years.
  type: linear.ReduceAction
  quantity: ratio
  unit: '%'
  group: electric_grid
  output_nodes:
  - id: participation_smart_grid
  - id: smart_grid_improvement
  params:
  - id: reduce
    unit: '%'
    is_customizable: false
    value:
    - target:
        node: participation_smart_grid
      amounts:
      - year: 2022
        amount: 2.675  # (30-9)/8
      - year: 2029
        amount: 2.675
      - year: 2030
        amount: 0
    - target:
        node: smart_grid_improvement
      amounts:
      - year: 2022
        amount: 3.3
      - year: 2024
        amount: 3.3
      - year: 2025
        amount: 0

- id: reduce_transmission_distribution_losses
  name: Encourage practices that reduce transmission and distribution losses
  description: Reduce electric grid transmission and distribution losses through grid
    management such as distributed voltage optimization.
  type: linear.ReduceAction
  quantity: ratio
  unit: '%'
  group: electric_grid
  output_nodes:
  - id: transmission_loss_change
  params:
  - id: reduce
    unit: '%'
    is_customizable: false
    value:
    - target:
        node: transmission_loss_change
      amounts:
      - year: 2022
        amount: 1.5
      - year: 2023
        amount: 0

- id: vehicle_incentives
  name: Increase electric vehicles through vehicle incentives and improved infrastructure
  description: Increase the rate of electric vehicle adoption until a majority of
    vehicles are powered by clean electricity.
  type: simple.AdditiveAction
  quantity: mileage
  unit: miles/a
  group: transportation
  forecast_values: [[2023, 0], [2050, 0]]

- id: increase_access_of_public_transit
  name: Address barriers to increase access and use of public transit
  description: Address barriers to increase access and use of public transit, especially
    for underserved communities.
  type: simple.AdditiveAction
  quantity: mileage
  unit: miles/a
  group: transportation
  forecast_values: [[2023, 0], [2050, 0]]

- id: multimodal_transportation_system
  name: Develop multimodal transportation system
  description: Pursue all elements of Longmont's multimodal transportation plan. Actively
    reduce greenhouse gas emissions through bicycle and pedestrian improvements and
    first/last mile connections.
  type: simple.AdditiveAction
  quantity: mileage
  unit: miles/a
  group: transportation
  forecast_values: [[2023, 0], [2050, 0]]

- id: leak_detection
  name: Adopt and enforce leak detection and repair
  description: The original intent of this action was to improve monitoring of oil
    and gas sites by increasing methane leak detection and repair and minimizing leaks
    in the transmission and distribution system of natural gas. However, there are
    no longer any active oil and gas facilities within City limits and the City has
    no legal authority to enforce leaks or repairs associated with oil and gas operations.
  type: simple.AdditiveAction
  quantity: fraction
  unit: '%'
  group: oil_and_gas
  forecast_values: [[2023, 0], [2050, 0]]

- id: increase_waste_diversion
  name: Increase waste diversion
  description: Achieve 85% waste diversion from the landfill by 2035 and 95% by 2050.
  type: simple.AdditiveAction
  quantity: fraction
  unit: '%'
  group: solid_waste
  forecast_values: [[2023, 0], [2050, 0]]

#- id: commercial_power_purchase_program
#  name: Commercial power purchase program
#  type: simple.CumulativeAdditiveAction
#  quantity: energy
#  unit: kWh/a
#  forecast_values: [[2022, 0], [2023, -3544251]]
#  output_nodes:
#  - id: electricity_consumption
#    to_dimensions:
#    - id: emission_sectors
#      categories: [commercial_industrial_energy]
#    - id: site
#      categories: [longmont_power]

#- id: residential_power_purchase_program
#  name: Residential power purchase program
#  type: simple.CumulativeAdditiveAction
#  quantity: energy
#  unit: kWh/a
#  forecast_values: [[2022, 0], [2023, -3550001]]
#  output_nodes:
#  - id: electricity_consumption
#    to_dimensions:
#    - id: emission_sectors
#      categories: [residential_energy]
#    - id: site
#      categories: [longmont_power]

#- id: residential_rooftop_solar
#  name: Residential rooftop solar
#  type: simple.CumulativeAdditiveAction
#  quantity: energy
#  unit: kWh/a
#  forecast_values: [[2022, 0], [2023, -5080497]]
#  output_nodes:
#  - id: electricity_consumption
#    to_dimensions:
#    - id: emission_sectors
#      categories: [residential_energy]
#    - id: site
#      categories: [longmont_power]

- id: longmont_equity_share_platte_river_power_authority
  name: Longmont equity share emissions from Platte River Power Authority
  type: simple.CumulativeAdditiveAction
  quantity: emissions  # FIXME Is this negative emission or what happens here?
  unit: t/a
  group: electric_grid
  forecast_values: [[2022, 0], [2023, 307035]]
  output_nodes:
  - id: equity_share_emissions
    to_dimensions:
    - id: greenhouse_gases
      categories: [co2]

# FIXME Francie: would it be possible to have both an option where someone could see the model
# go to 0 and then also go to 90% renewable? I believe the projection is the exact same,
# but instead of dropping to 0 in 2030, the emission factor drops to .034. Also as I
# mentioned in the meeting, this emission factor includes our participation in the
# renewable power purchase program so that does not need to be listed separately.
- id: longmont_power_renewables
  name: 100% renewable electric energy supply by 2030
  description: <p>On January 9th, 2018, City Council passed a <a href="http://www.longmontcolorado.gov/home/showpublisheddocument/24804/636728893554700000">resolution</a>
    to commit Longmont to 100% renewable electric energy supply by 2030. To model
    this impact, the City uses a projection from Platte River Power Authority on the
    future emission factors until 2030 and then drops the emission factor to 0 in
    2030 to reflect achieving the 100% renewable goal.</p><p>According to Platte River
    Power Authority’s  most recent integrated resource plan, existing technology will
    only help Platte River reach 90% noncarbon by 2030. Emerging technologies will
    need to be developed to achieve the 100% noncarbon target.</p>
  type: linear.ReduceAction
  quantity: emission_factor
  unit: t/MWh
  group: electric_grid
  output_nodes:
  - electricity_emission_factor
  params:
  - id: reduce
    unit: t/MWh
    is_customizable: false
    value:
    - target:
        node: electricity_emission_factor
        categories:
          greenhouse_gases: co2
          site: longmont_power
      amounts:
      - year: 2023
        amount: -0.064875
      - year: 2030
        amount: -0.064875
      - year: 2031
        amount: 0
    - target:
        node: electricity_emission_factor
        categories:
          greenhouse_gases: co2
          site: various
      amounts:
      - year: 2023
        amount: -0.05875
      - year: 2030
        amount: -0.05875
      - year: 2031
        amount: 0

- id: residential_electricity_eui_trend
  name: Residential electricity EUI trend
  description: Change in residential electricity use intensity in new buildings based
    in stricter IECC values every three years.
  type: simple.AdditiveAction
  quantity: consumption_factor
  unit: kWh/ft**2/a
  group: trend
  forecast_values: [[2021, 0], [2022, -0.172], [2023, -0.172], [2024, -0.172], [2025,
      -0.336], [2026, -0.336], [2027, -0.336], [2028, -0.492], [2029, -0.492], [2030,
      -0.492], [2031, -0.639], [2032, -0.639], [2033, -0.639], [2034, -0.78], [2035,
      -0.78], [2036, -0.78], [2037, -0.913], [2038, -0.913], [2039, -0.913], [2040,
      -1.04], [2041, -1.04], [2042, -1.04], [2043, -1.16], [2044, -1.16], [2045, -1.16],
    [2046, -1.274], [2047, -1.274], [2048, -1.274], [2049, -1.383], [2050, -1.383]]
  output_nodes:
  - id: electricity_residential_eui
#    to_dimensions:
#    - id: emission_sectors
#      categories: [residential_energy]

- id: commercial_electricity_eui_trend
  name: Commercial electricity EUI trend
  description: Change in commercial electricity use intensity in new buildings based
    in stricter IECC values every three years.
  type: simple.AdditiveAction
  quantity: consumption_factor
  unit: kWh/ft**2/a
  group: trend
  forecast_values: [[2021, 0], [2022, -1.891], [2023, -1.891], [2024, -1.891], [2025,
      -3.572], [2026, -3.572], [2027, -3.572], [2028, -5.066], [2029, -5.066], [2030,
      -5.066], [2031, -6.394], [2032, -6.394], [2033, -6.394], [2034, -7.575], [2035,
      -7.575], [2036, -7.575], [2037, -8.625], [2038, -8.625], [2039, -8.625], [2040,
      -9.558], [2041, -9.558], [2042, -9.558], [2043, -10.388], [2044, -10.388], [
      2045, -10.388], [2046, -11.126], [2047, -11.126], [2048, -11.126], [2049, -11.781],
    [2050, -11.781]]
  output_nodes:
  - id: electricity_commercial_eui
 #   to_dimensions:
 #   - id: emission_sectors
 #     categories: [commercial_industrial_energy]

- id: residential_natural_gas_eui_trend
  name: Residential natural gas EUI trend
  description: Change in residential natural gas use intensity in new buildings based
    in stricter IECC values every three years.
  type: simple.AdditiveAction
  quantity: consumption_factor
  unit: therm/ft**2/a
  group: trend
  forecast_values: [[2021, 0], [2022, -0.014], [2023, -0.014], [2024, -0.014], [2025,
      -0.026], [2026, -0.026], [2027, -0.026], [2028, -0.039], [2029, -0.039], [2030,
      -0.039], [2031, -0.05], [2032, -0.05], [2033, -0.05], [2034, -0.061], [2035,
      -0.061], [2036, -0.061], [2037, -0.072], [2038, -0.072], [2039, -0.072], [2040,
      -0.081], [2041, -0.081], [2042, -0.081], [2043, -0.091], [2044, -0.091], [2045,
      -0.091], [2046, -0.1], [2047, -0.1], [2048, -0.1], [2049, -0.108], [2050, -0.108]]
  output_nodes:
  - id: natural_gas_residential_eui
  #  to_dimensions:
  #  - id: emission_sectors
  #    categories: [residential_energy]

- id: commercial_natural_gas_eui_trend
  name: Commercial natural gas EUI trend
  description: Change in commercial natural gas use intensity in new buildings based
    in stricter IECC values every three years.
  type: simple.AdditiveAction
  quantity: consumption_factor
  unit: therm/ft**2/a
  group: trend
  forecast_values: [[2021, 0], [2022, -0.058], [2023, -0.058], [2024, -0.058], [2025,
      -0.11], [2026, -0.11], [2027, -0.11], [2028, -0.157], [2029, -0.157], [2030,
      -0.157], [2031, -0.198], [2032, -0.198], [2033, -0.198], [2034, -0.234], [2035,
      -0.234], [2036, -0.234], [2037, -0.267], [2038, -0.267], [2039, -0.267], [2040,
      -0.296], [2041, -0.296], [2042, -0.296], [2043, -0.321], [2044, -0.321], [2045,
      -0.321], [2046, -0.344], [2047, -0.344], [2048, -0.344], [2049, -0.364], [2050,
      -0.364]]
  output_nodes:
  - id: natural_gas_commercial_eui
#    to_dimensions:
#    - id: emission_sectors
#      categories: [commercial_industrial_energy]

pages:
- id: home
  name: Longmont Greenhouse Gas Inventory
  path: /
  type: emission
  node: direct_emissions
  lead_title_en: Development version
  lead_paragraph_en: <p>This is a test version of the City of Longmont's interactive
    scenario modeling platform for the Net Zero goal. All information on this website
    is to be considered incomplete and experimental.</p> <p>The goal of this tool
    is to provide a transparent and defensible calculation methodology for estimating
    the potential of GHG emission reduction strategies and interactive data visualizations
    to represent the emission reduction potential of those strategies.</p> <p><b>Background</b></p>
    <p>This spreadsheet compiles strategy information and associated assumptions and
    data to estimate GHG emission reductions from key building energy, electric grid,
    renewable energy, mobile, solid waste, and oil and gas strategies. Previous versions
    of this model based emission reductions  on Longmont's "core" emissions, which
    include emissions from electricity, natural gas, gasoline, solid waste, and oil
    wells. These emission sources are the main focus of the GHG reduction strategies
    and make up approximately 83% of Longmont's total emissions in 2016 as reported
    in the Final_City of Longmont 2016 GHG Inventory Workbook. This updated version
    of the model bases emissions reductions on Longmont's total emissions. This update
    also added emission values from Longmont's 2019 emissions inventory as reported
    in the FINAL_Longmont_2019_Inventory_060220 workbook.</p>

- id: updating
  name: Updating Guide
  path: /updating
  lead_paragraph_en: <p>This page provides instructions on how to update this tool
    and which values can be updated. A general set of directions is provided, followed
    by a table documenting which values on each tab can be updated and when it is
    appropriate to do so.</p> <p><b>Updating the Model</b></p> <p>The purpose of this
    model is to demonstrate the GHG reduction potential of Longmont´s strategies compared
    to Business-As-Usual emissions (if no strategies were implemented) based on a
    2016 or 2018 baseline. Updates to this model should be decided based on the below
    criteria.</p> <p>The model should NOT be updated for the following reasons.</p>
    <li> <ul>Future GHG emissions inventories. The BAU tab should not be updated with
    actual GHG emissions values in future years. The purpose of the BAU is to show
    emissions if no strategies were to be implemented. Using actual GHG values in
    future years when several strategies have been implemented would misrepresent
    BAU emissions and may double count savings. Actual emissions from future GHG inventories
    can be entered into the Progress Tracker tab so Longmont can monitor if actual
    GHG emissions align with expected reductions due to strategy implementation.</ul>
    <ul>LPC electricity emission factor updates. Future emission factors from LPC
    should not be added to this tool as the emission factors will reflect the renewable
    energy strategy modeled in this tool. The BAU LPC emission factor represents the
    emission factor if LPC were to not pursue renewable energy. The renewable energy
    EF is used directly in the modeled strategies and should not be adjusted with
    actual values to preserve the desired progress toward RE modeled in this tool.
    Actual progress towards the renewable energy goal will be tracked in each of Longmont's
    future GHG inventories. Inventory results can be compared to the modeled values
    in the Progress Tracker tab.</ul> <ul>Minor changes in emission calculation methodology.
    Baseline year emissions in the BAU should not be updated when minor methodology
    changes in calculation occur. If methodology changes would not impact total emissions
    in the baseline by greater than 5% then emissions should not be updated for the
    baseline year.</ul></li> The model should be updated for the following reasons
    <li> <ul>Changes to strategy targets or assumptions. If the target for a strategy
    is updated, the target should be updated in the Model Inputs tab and any calculation
    adjustments be made in the corresponding model tab. If more accurate and defensible
    assumptions can be made for a strategy compared to current assumption, assumptions
    should be updated in the Model Inputs tab.</ul> <ul>Xcel electricity emission
    factor updates. Xcel provides a small portion of electricity to Longmont and is
    not a part of LPC's goal for 100% renewable energy which is modeled in this tool.
    As such, Xcel's emission factors should be updated either each year or whenever
    new GHG inventory data is available for input in the Progress Tracker tab. This
    ensures that factors outside of the modeled strategies control are as accurate
    as possible.</ul> <ul>Updates to model parameter data (e.g., population and registered
    vehicles). Model parameter data includes model inputs that are NOT impacted by
    strategies. This includes population and registered vehicle data. As no strategies
    currently modeled have an impact on these parameters, they should be updated when
    possible to ensure modeling is using the most up to date external information
    for calculating emissions and emissions reductions. For example, if population
    were to increase more than is currently forecasted in a future year and this number
    were to not be updated, then emissions in the BAU would be nderestimated as the
    BAU uses population increase as a major parameter for forecasting.</ul> <ul>Major
    changes to emission calculation methodology. Major changes to emission calculation
    methodology may warrant updates to the baseline years. Changes that would drastically
    impact emission numbers and make accurate comparison to previous year's inventory
    data inaccurate would require updating the baseline years to ensure alignment
    across years. For example, the 2016 baseline year emissions were updated as new
    Global Warming Potential values were released by the IPCC. If emissions in future
    years in the BAU or in modeled strategies were calculated with the updated GWPs
    while the baseline year used old GWPs, emissions calculations would not have an
    accurate baseline comparison. Major changes like GWP updates will likely be infrequent.</ul>
    </li> <h2>When to Update Data</h2> <li> <ul><b>Strategy targets.</b> Update if
    strategy targets are adjusted or if new strategies are added.</ul> <ul><b>Actual
    emissions.</b> Update when new GHG emissions inventory data is available.</ul>
    <ul><b>Strategy Selector.</b> Only update if new strategies are added.</ul> <ul><b>Model
    Input Values.</b> Update to reflect any changes in assumptions or strategy targets.</ul>
    <ul><b>Target reduction.</b> Update to reflect any changes in assumptions or strategy
    targets.</ul> <ul><b>Target year.</b> Update to reflect any changes in strategy
    target years.</ul> <ul><b>Business As Usual Baseline emissions.</b> Baseline emissions
    (2016 or 2018) should only be updated if there are major changes to emission calculation
    methodology in future years that would detrimentally impact the models ability
    to compare future emissions to the baseline. Actual GHG emission data for future
    years should NOT be entered into this tab.</ul> <ul><b>Non-electricity emission
    factors.</b> Non-electricity emission factors likely will not change often. It
    is recommended to review emission factor values for updates every few years.</ul>
    <ul><b>Population.</b> Update population data as actual data becomes available.</ul>
    <ul><b>Xcel Energy electricity emission factor.</b> Updated Xcel's emission factor
    as actual data becomes available.</ul> <ul><b>LPC RE and BAU emission factors.</b>
    Do not update.</ul> <ul><b>Fuel efficiencies.</b> Only update the "Gasoline Passenger
    Vehicle Projected fuel efficiency" row if new fuel efficiency standards are released.</ul>
    <ul><b>Registered vehicles.</b> Update registered vehicle data as actual data
    becomes available.</ul> </li>

scenarios:
- id: baseline
  name: Baseline
  params:
  - id: residential_electricity_eui_trend.enabled
    value: true
  - id: commercial_electricity_eui_trend.enabled
    value: true
  - id: residential_natural_gas_eui_trend.enabled
    value: true
  - id: commercial_natural_gas_eui_trend.enabled
    value: true

- id: default
  default: true
  name: Climate Action Recommendations
  all_actions_enabled: true

##################
# DESCRIPTION OF DATA AND CALCULATIONS
# Data and equations come from file Longmont_Model_Feb 2023 Update_FINAL.xlsx
